var gulp=require("gulp"),connect=require("gulp-connect"),jshint=require("gulp-jshint"),uglify=require("gulp-uglify"),notify=require("gulp-notify"),htmlmin=require("gulp-htmlmin"),imagemin=require("gulp-imagemin"),pngcrush=require("imagemin-pngcrush"),less=require("gulp-less"),cssver=require("gulp-make-css-url-version"),cssmin=require("gulp-minify-css");gulp.task("webserver",function(){connect.server({livereload:!0})}),gulp.task("testHtmlmin",function(){var e={removeComments:!0,collapseWhitespace:!1,collapseBooleanAttributes:!1,removeEmptyAttributes:!0,removeScriptTypeAttributes:!0,removeStyleLinkTypeAttributes:!0,minifyJS:!0,minifyCSS:!0};gulp.src("app/html/*.html").pipe(htmlmin(e)).pipe(gulp.dest("dist/html"))}),gulp.task("less",function(){gulp.src("app/style/*.less").pipe(less()).pipe(gulp.dest("app/style")).pipe(connect.reload())}),gulp.task("testCssmin",function(){gulp.src("app/css/*.css").pipe(cssver()).pipe(cssmin()).pipe(gulp.dest("dist/css"))}),gulp.task("jshint",function(){return gulp.src("app/js/*.js").pipe(jshint()).pipe(jshint.reporter("default"))}),gulp.task("minifyjs",function(){return gulp.src("app/js/*.js").pipe(uglify()).pipe(gulp.dest("dist/js"))}),gulp.task("imagemin",function(){return gulp.src("app/images/*").pipe(imagemin({progressive:!0,svgoPlugins:[{removeViewBox:!1}],use:[pngcrush()]})).pipe(gulp.dest("dist/images/")).pipe(notify({message:"img task ok"}))}),gulp.task("watch",function(){gulp.watch("app/html/*.html",["testHtmlmin"]),gulp.watch("app/js/*.js",["jshint","minifyjs"]),gulp.watch("app/styles/*.less",["less"]),gulp.watch("app/styles/*.css",["testCssmin"])}),gulp.task("default",["less","minifyjs","testHtmlmin",,"testCssmin","webserver","watch"]);